<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" href="/teams.css">
  <title>Teams</title>
</head>
<body>
<div th:replace="fragments/header :: appHeader('teams')"></div>
<!-- Heading changes based on role -->
<h2 th:if="${#authorization.expression('hasRole(''ROLE_ADMIN'')')}">Teams Management</h2>
<h2 th:if="${#authorization.expression('hasRole(''ROLE_MEMBERS'')')}">Nhóm của tôi</h2>

<table class="team-table">
  <tr>
    <th>Team ID</th>
    <th>Team Name</th>
    <th>Owner</th>
    <th>Action</th>
  </tr>

  <!-- rows -->
  <tr th:each="team : ${teams}">
    <td th:text="${team.teamId}"></td>
    <td th:text="${team.teamName}"></td>
    <td th:text="${team.owner != null ? team.owner.username : '—'}"></td>
    <td>
      <a th:href="@{'/teams/' + ${team.teamId}}">Details</a>
      <!-- Admin-only actions -->
      <span th:if="${#authorization.expression('hasRole(''ROLE_ADMIN'')')}">
        <a th:href="@{'/teams/delete/' + ${team.teamId}}">Delete</a>
      </span>
    </td>
  </tr>

  <!-- empty state -->
  <tr th:if="${#lists.isEmpty(teams)}">
    <td colspan="4">Không có nhóm nào.</td>
  </tr>
</table>

<!-- Admin-only: create button -->
<button th:if="${#authorization.expression('hasRole(''ROLE_ADMIN'')')}">
  <a href="/teams/create">Create Team</a>
</button>

</body>
</html>